$(document).ready(function(){load_link_triggers()});function load_link_triggers(){$('a[href^="##"]').each(function(){$(this).on("click",function(a){a.preventDefault();$page=$(this).attr("href").replace("##","");"/"===$page[0]&&($page=$page.substr(1));changePage($page)})})}var socket_page=io.connect(window.location.protocol+"//"+window.location.host+"/page",{"force new connection":!0});
socket_page.on("page",function(a){$("#singleview-content").html(atob(a)).show();$('a[href^="##"]').unbind("click");load_link_triggers()});function currentPath(){var a=window.location.pathname;"/"===a[0]&&(a=a.substr(1));return a}
function changePage(a,b){if(void 0===b||null===b)b=!1;if(currentPath()===a&&!0===b||currentPath()!==a)$("#singleview-content").hide(),socket_page.emit("get page",{page:a});if(!1===b){var c=window.location.protocol+"//"+window.location.host+"/"+a;window.history.pushState({path:c},"",c)}}window.onpopstate=function(a){var b=window.location.protocol+"//"+window.location.host+"/";null!==a.state?(a=a.state.path.slice(a.state.path.indexOf(b)+b.length),changePage(a,!0)):changePage("",!0)};